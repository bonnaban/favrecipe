<main>
  <div class = "container">
    <div class = "row">
      <div class = "col-sm-11 offset-sm-1">
        <h3><i class="fas fa-cookie-bite"></i><%= @recipe_d.title %></h3>
      </div>
      <div class = "col-sm-12">
        <!--料理画像を中央寄せし、縦横最大1000pxで表示 画像が無ければno_imageを表示-->
        <% if @recipe_d.image.attached? %>
          <%= image_tag @recipe_d.image.representation(resize_to_limit: [1000, 1000]), class: "mx-auto d-block" %>
        <% else %>
          <%= image_tag asset_path('no_image.jpg'), class: "mx-auto d-block", style: "max-width:500px;" %>
        <% end %>
      </div>
      <div class = "col-sm-3">
        投稿日
      </div>
      <div class = "col-sm-3">
        <%= @recipe_d.created_at.strftime('%Y/%m/%d') %>
      </div>
      <div class = "col-sm-3">
        調理時間
      </div>
      <div class = "col-sm-3">
        <%= @recipe_d.time %>分
      </div>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        <h3><i class="fas fa-book-open"></i>料理説明</h3>
      </div>
      <div class = "col-sm-11 offset-sm-1">
        <%= @recipe_d.explanation %>
      </div>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        <h3><i class="fas fa-user"></i>材料<%= @recipe_d.people %>人分</h3>
      </div>
      <!--アソシエーションで紐づいているmaterialsのカラムをeach文で表示-->
      <% @recipe_d.materials.each do |material|%>
      <span class = "col-sm-3 offset-sm-2">
        <%= material.material_name %>
      </span>
      <span class = "col-sm-3 text-right">
        <%= material.quantity %>
      </span>
      <% end %>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        <h3><i class="fas fa-utensils"></i>作り方</h3>
      </div>
      <!--アソシエーションで紐づいているproceduresのカラムをeach文で表示-->
      <% @recipe_d.procedures.each do |procedure|%>
      <span class = "col-sm-3 offset-sm-2">
        <%= procedure.procedure_explanation %>
      </span>
      <span class = "col-sm-3 text-right">
        <% if procedure.image.attached? %>
          <%= image_tag procedure.image.representation(resize_to_limit: [100, 100]) %>
        <% else %>
            <%= image_tag asset_path('no_image.jpg'), class: "preview", style: "max-width:100px;" %>
        <% end %>
      </span>
      <% end %>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        <h3><i class="far fa-comment"></i></i>コメント</h3>
      </div>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        ##
      </div>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        <h3><i class="fas fa-comment-medical"></i></i>コメント追加</h3>
      </div>
      <div class = "col-sm-11 offset-sm-1 mt-3">
        ##
      </div>
      <% if @recipe_d.user_id == current_user.id %>
      <div class = "col-sm-12 text-center">
        <%= link_to "編集する", edit_recipe_d_path(@recipe_d), class: 'btn btn-sm btn-success' %>
        <%= link_to "削除する", recipe_d_path(@recipe_d), class: 'btn btn-sm btn-danger', method: :delete, data: { confirm: "本当に削除しますか？" } %>
      </div>
      <% end %>
    </div>
  </div>
</main>